# 📌 스냅샷 테스트의 한계

스냅샷 테스트는 UI 변경 사항을 감지하는 데 유용하지만, **효율적으로 관리하지 않으면 오히려 유지보수가 어려워질 수 있다.**  
특히, **컴포넌트가 복잡해질수록 가독성이 떨어지고, 무분별한 스냅샷 업데이트로 인해 신뢰성이 낮아질 가능성이 크다.**  

---

## ❌ 스냅샷 테스트의 문제점

### 1️⃣ **스냅샷 관리가 어렵다**
- 컴포넌트가 커지고 복잡해질수록 **스냅샷의 크기가 비대해지고, 가독성이 떨어짐.**
- 스냅샷 파일이 길어질수록 **어떤 변경이 중요한 변경인지 판단하기 어려워짐.**
- 단순한 공백이나 스타일 변경에도 테스트가 실패하면서 **불필요한 업데이트가 많아질 수 있음.**

### 2️⃣ **무분별한 스냅샷 업데이트**
- 개발자가 스냅샷을 **이해하지 않고 무조건 업데이트(`-u` 옵션)** 하면,  
  → 원치 않는 UI 변경이 포함될 수 있음.
- 코드 리뷰 없이 자동으로 업데이트되면 **버그를 감지하지 못한 채 배포될 가능성**이 높음.  

### 3️⃣ **실제 UI 변화 감지 불가**
- 스냅샷 테스트는 **HTML 구조만 비교**하고, **스타일(CSS) 변경을 감지할 수 없음.**
- UI 상의 미묘한 변화(레이아웃 깨짐 등)를 놓칠 수 있어, **비주얼 리그레션 테스트(Visual Regression Test)와 병행이 필요.**

### 4️⃣ **TDD 사이클과 맞지 않음**
- TDD(Test-Driven Development)에서는 **"테스트를 먼저 작성 → 코드 구현 → 리팩토링"** 흐름을 따름.
- 하지만 스냅샷 테스트는 **변경 후 스냅샷을 찍는 방식**이라 TDD 원칙과 맞지 않음.

---

## ✅ 스냅샷 테스트의 유지보수 방법

### 1️⃣ **불필요한 스냅샷을 최소화하자**
- **컴포넌트 크기를 작게 유지**하여 스냅샷의 가독성을 높인다.
- **핵심적인 부분만 테스트**하고, 너무 많은 UI 요소를 포함하지 않는다.

### 2️⃣ **ESLint 규칙 적용 (`no-large-snapshots`)**
- `no-large-snapshots` 규칙을 적용하면, **지정된 크기 이상의 스냅샷 생성을 방지**할 수 있다.
```json
"overrides": [
  {
    "files": ["**/__snapshots__/*.snap"],
    "rules": {
      "jest/no-large-snapshots": ["warn", { "maxSize": 50 }]
    }
  }
]
```
**✔ 스냅샷 크기를 제한하여 지나치게 큰 스냅샷을 방지**

### 3️⃣ 비주얼 리그레션 테스트와 함께 사용
- CSS 변경을 감지할 수 있도록 비주얼 테스트 도구(Screenshot Diffing)를 활용
- 대표적인 도구: Storybook + Chromatic, Percy, Loki
- UI의 실제 렌더링 결과를 이미지로 비교하여 스냅샷 테스트의 한계를 보완
